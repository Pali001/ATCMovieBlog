using Newtonsoft.Json;
using ATCMovieBlog.MovieData;
using ATCMovieBlog.Model;
using static System.Net.WebRequestMethods;
using RestSharp;
using System.Collections.Generic;

namespace ATCMovieBlog.Services
{
    public class API : IAPI
    {
     
        public async Task<Root> MovieAPI()

        {

           // HttpClient client = new HttpClient();

          //  string responseBody = null;

           // string apiKey = "d817fd94e001c3b41fa48d7b2d4be5e7";

            //  string URL = "https://api.themoviedb.org/3/trending/all/week?api_key=" + apiKey;

            string URL = "https://api.themoviedb.org/3/trending/all/day?api_key=d817fd94e001c3b41fa48d7b2d4be5e7";

            //responseBody = await client.GetStringAsync(URL);

            //moviesAPI root =  JsonConvert.DeserializeObject<moviesAPI>(responseBody);

            //p 
            var client = new RestClient(URL);
           //client.Timeout = -1;
            RestRequest request = new RestRequest();
            RestResponse response = client.Execute(request);
            request.Method = Method.Get;
            Root root = JsonConvert.DeserializeObject<Root>(response.Content);



            return root;
        }
        ////https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc?api_key=d817fd94e001c3b41fa48d7b2d4be5e7<api_key=d817fd94e001c3b41fa48d7b2d4be5e7&/discover/movie?sort_by=popularity.desc
        //https://api.themoviedb.org/3/movie/
    }
}
//https://api.themoviedb.org/3/search/movie?api_key={api_key}&query=Jack+Reacher

//'https://api.themoviedb.org/3/trending/all/week?api_key={API_KEY_HERE}&language=en-US'

// "{\"page\":1,\"results\":[{\"adult\":false,\"backdrop_path\":\"/bQXAqRx2Fgc46uCVWgoPz5L5Dtr.jpg\",\"id\":436270,\"title\":\"Black Adam\",\"original_language\":\"en\",\"original_title\":\"Black Adam\",\"overview\":\"Nearly 5,000 years after he was bestowed with the almighty powers of the Egyptian gods—and imprisoned just as quickly—Black Adam is freed from his earthly tomb, ready to unleash his unique form of justice on the modern world.\",\"poster_path\":\"/3zXceNTtyj5FLjwQXuPvLYK5YYL.jpg\",\"media_type\":\"movie\",\"genre_ids\":[28,14,878],\"popularity\":4438.636,\"release_date\":\"2022-10-19\",\"video\":false,\"vote_average\":7.1,\"vote_count\":671},{\"adult\":false,\"backdrop_path\":\"/etj8E2o0Bud0HkONVQPjyCkIvpv.jpg\",\"id\":94997,\"name\":\"House of the Dragon\",\"original_language\":\"en\",\"original_name\":\"House of the Dragon\",\"overview\":\"The Targaryen dynasty is at the absolute apex of its power, with more than 15 dragons under their yoke. Most empires crumble from such heights. In the case of the Targaryens, their slow fall begins when King Viserys breaks with a century of tradition by naming his daughter Rhaenyra heir to the Iron Throne. But when Viserys later fathers a son, the court is shocked when Rhaenyra retains her status as his heir, and seeds of division sow friction across the realm.\",\"poster_path\":\"/z2yahl2uefxDCl0nogcRBstwruJ.jpg\",\"media_type\":\"tv\",\"genre_ids\":[10765,18,10759],\"popularity\":3675.761,\"first_air_date\":\"2022-08-21\",\"vote_average\":8.526,\"vote_count\":2182,\"origin_country\":[\"US\"]},{\"adult\":false,\"backdrop_path\":\"/bUjPcNS8GweBh5Nxp8oq9Dy712Z.jpg\",\"id\":913290,\"title\":\"Barbarian\",\"original_language\":\"en\",\"original_title\":\"Barbarian\",\"overview\":\"In town for a job interview, a young woman arrives at her Airbnb late at night only to find that it has been mistakenly double-booked and a strange man is already staying there. Against her better judgement, she decides to stay the night anyway, but soon discovers that there is much more to be afraid of in the house than the other guest.\",\"poster_path\":\"/idT5mnqPcJgSkvpDX7pJffBzdVH.jpg\",\"media_type\":\"movie\",\"genre_ids\":[27,9648,53],\"popularity\":738.781,\"release_date\":\"2022-09-08\",\"video\":false,\"vote_average\":7.036,\"vote_count\":329},{\"adult\":false,\"backdrop_path\":\"/hIZFG7MK4leU4axRFKJWqrjhmxZ.jpg\",\"id\":95403,\"name\":\"The Peripheral\",\"original_language\":\"en\",\"original_name\":\"The Peripheral\",\"overview\":\"Stuck in a small Appalachian town, a young woman’s only escape from the daily grind is playing advanced video games. She is such a good player that a company sends her a new video game system to test…but it has a surprise in store. It unlocks all of her dreams of finding a purpose, romance, and glamour in what seems like a game…but it also puts her and her family in real danger.\",\"poster_path\":\"/ccBe5BVeibdBEQU7l6P6BubajWV.jpg\",\"media_type\":\"tv\",\"genre_ids\":[10765,18],\"popularity\":567.4,\"first_air_date\":\"2022-10-20\",\"vote_average\":8.373,\"vote_count\":110,\"origin_country\":[\"US\"]},{\"adult\":false,\"backdrop_path\":\"/3tEuJWbFjyQL2m4AlGVB1cRqn1E.jpg\",\"id\":83659,\"name\":\"Guillermo del Toro's Cabinet of Curiosities\",\"original_language\":\"en\",\"original_name\":\"Guillermo del Toro's Cabinet of Curiosities\",\"overview\":\"Bizarre nightmares unfold in eight tales of terror in this visually stunning, spine-tingling horror collection curated by Guillermo del Toro.\",\"poster_path\":\"/a91e9hpWwfCqxJI4xM9Q2RhuxgI.jpg\",\"media_type\":\"tv\",\"genre_ids\":[18,9648],\"popularity\":357.655,\"first_air_date\":\"2022-10-25\",\"vote_average\":8.293,\"vote_count\":87,\"origin_country\":[\"US\"]},{\"adult\":false,\"backdrop_path\":\"/zt6sKnx9dEiRCb7oVMlfmmMGJMO.jpg\",\"id\":718930,\"title\":\"Bullet Train\",\"original_language\":\"en\",\"original_title\":\"Bullet Train\",\"overview\":\"Unlucky assassin Ladybug is determined to do his job peacefully after one too many gigs gone off the rails. Fate, however, may have other plans, as Ladybug's latest mission puts him on a collision course with lethal adversaries from around the globe—all with connected, yet conflicting, objectives—on the world's fastest train.\",\"poster_path\":\"/tVxDe01Zy3kZqaZRNiXFGDICdZk.jpg\",\"media_type\":\"movie\",\"genre_ids\":[28,35,53],\"popularity\":1814.944,\"release_date\":\"2022-07-03\",\"video\":false,\"vote_average\":7.522,\"vote_count\":2076},{\"adult\":false,\"backdrop_path\":\"/4O9kFXsBjlxtgzXWHfgMS9CjhbN.jpg\",\"id\":619730,\"title\":\"Don't Worry Darling\",\"original_language\":\"en\",\"original_title\":\"Don't Worry Darling\",\"overview\":\"Alice and Jack are lucky to be living in the idealized community of Victory, the experimental company town housing the men who work for the top-secret Victory Project and their families. But when cracks in their idyllic life begin to appear, exposing flashes of something much more sinister lurking beneath the attractive façade, Alice can’t help questioning exactly what they’re doing in Victory, and why.\",\"poster_path\":\"/9BXYLjXtSipBp2GfAlsri4i8hPC.jpg\",\"media_type\":\"movie\",\"genre_ids\":[53,9648,18],\"popularity\":1348.702,\"release_date\":\"2022-09-21\",\"video\":false,\"vote_average\":6.935,\"vote_count\":637},{\"adult\":false,\"backdrop_path\":\"/aTovumsNlDjof7YVoU5nW2RHaYn.jpg\",\"id\":616820,\"title\":\"Halloween Ends\",\"original_language\":\"en\",\"original_title\":\"Halloween Ends\",\"overview\":\"Four years after the events of Halloween in 2018, Laurie has decided to liberate herself from fear and rage and embrace life. But when a young man is accused of killing a boy he was babysitting, it ignites a cascade of violence and terror that will force Laurie to finally confront the evil she can’t control, once and for all.\",\"poster_path\":\"/kFMntvUmKhvw1uAHXecqqNSFXt.jpg\",\"media_type\":\"movie\",\"genre_ids\":[27,53],\"popularity\":2090.009,\"release_date\":\"2022-10-12\",\"video\":false,\"vote_average\":6.703,\"vote_count\":754},{\"adult\":false,\"backdrop_path\":\"/1rO4xoCo4Z5WubK0OwdVll3DPYo.jpg\",\"id\":84773,\"name\":\"The Lord of the Rings: The Rings of Power\",\"original_language\":\"en\",\"original_name\":\"The Lord of the Rings: The Rings of Power\",\"overview\":\"Beginning in a time of relative peace, we follow an ensemble cast of characters as they confront the re-emergence of evil to Middle-earth. From the darkest depths of the Misty Mountains, to the majestic forests of Lindon, to the breathtaking island kingdom of Númenor, to the furthest reaches of the map, these kingdoms and characters will carve out legacies that live on long after they are gone.\",\"poster_path\":\"/mYLOqiStMxDK3fYZFirgrMt8z5d.jpg\",\"media_type\":\"tv\",\"genre_ids\":[10765,10759,18],\"popularity\":2605.761,\"first_air_date\":\"2022-09-01\",\"vote_average\":7.648,\"vote_count\":1367,\"origin_country\":[\"US\"]},{\"adult\":false,\"backdrop_path\":\"/tSxbUnrnWlR5dQvUgqMI7sACmFD.jpg\",\"id\":779782,\"title\":\"The School for Good and Evil\",\"original_language\":\"en\",\"original_title\":\"The School for Good and Evil\",\"overview\":\"Best friends Sophie and Agatha navigate an enchanted school for young heroes and villains — and find themselves on opposing sides of the battle between good and evil.\",\"poster_path\":\"/6oZeEu1GDILdwezmZ5e2xWISf1C.jpg\",\"media_type\":\"movie\",\"genre_ids\":[14,28,18],\"popularity\":1879.676,\"release_date\":\"2022-10-19\",\"video\":false,\"vote_average\":7.307,\"vote_count\":392},{\"adult\":false,\"backdrop_path\":\"/mqsPyyeDCBAghXyjbw4TfEYwljw.jpg\",\"id\":49046,\"title\":\"All Quiet on the Western Front\",\"original_language\":\"de\",\"original_title\":\"Im Westen nichts Neues\",\"overview\":\"Paul Baumer and his friends Albert and Muller, egged on by romantic dreams of heroism, voluntarily enlist in the German army. Full of excitement and patriotic fervour, the boys enthusiastically march into a war they believe in. But once on the Western Front, they discover the soul-destroying horror of World War I.\",\"poster_path\":\"/hYqOjJ7Gh1fbqXrxlIao1g8ZehF.jpg\",\"media_type\":\"movie\",\"genre_ids\":[28,18,36,10752],\"popularity\":114.583,\"release_date\":\"2022-10-07\",\"video\":false,\"vote_average\":8.171,\"vote_count\":161},{\"adult\":false,\"backdrop_path\":\"/rV0xrSgkOQj2EpiG8n16VHHJeg3.jpg\",\"id\":541134,\"title\":\"The Good Nurse\",\"original_language\":\"en\",\"original_title\":\"The Good Nurse\",\"overview\":\"Suspicious that her colleague is responsible for a series of mysterious patient deaths, a nurse risks her own life to uncover the truth in this gripping thriller based on true events.\",\"poster_path\":\"/rSq6cq0LCcbro10jbEaPTEb3WmW.jpg\",\"media_type\":\"movie\",\"genre_ids\":[18,80,9648],\"popularity\":146.961,\"release_date\":\"2022-10-19\",\"video\":false,\"vote_average\":7.139,\"vote_count\":190},{\"adult\":false,\"backdrop_path\":\"/ulyR4pWVMRtVcanoassVbmgfEPT.jpg\",\"id\":800939,\"title\":\"Ticket to Paradise\",\"original_language\":\"en\",\"original_title\":\"Ticket to Paradise\",\"overview\":\"A divorced couple teams up and travels to Bali to stop their daughter from making the same mistake they think they made 25 years ago.\",\"poster_path\":\"/1tzERH50P5c2mFWtLbgixzLZS1L.jpg\",\"media_type\":\"movie\",\"genre_ids\":[35,10749],\"popularity\":215.674,\"release_date\":\"2022-09-08\",\"video\":false,\"vote_average\":6.862,\"vote_count\":167},{\"adult\":false,\"backdrop_path\":\"/dVTvzp1PEnvloYy7qzYCFeAkPQ3.jpg\",\"id\":203085,\"name\":\"Star Wars: Tales of the Jedi\",\"original_language\":\"en\",\"original_name\":\"Star Wars: Tales of the Jedi\",\"overview\":\"Journey into the lives of two distinctly different Jedi from the prequel era – Ahsoka Tano and Count Dooku. Each will be put to the test as they make choices that will define their destinies.\",\"poster_path\":\"/l6p2eG9YDt7x6OgTC2PCW8yvVqb.jpg\",\"media_type\":\"tv\",\"genre_ids\":[16,10765],\"popularity\":209.147,\"first_air_date\":\"2022-10-26\",\"vote_average\":8.246,\"vote_count\":59,\"origin_country\":[\"US\"]},{\"adult\":false,\"backdrop_path\":\"/ajztm40qDPqMONaSJhQ2PaNe2Xd.jpg\",\"id\":83867,\"name\":\"Star Wars: Andor\",\"original_language\":\"en\",\"original_name\":\"Star Wars: Andor\",\"overview\":\"The tale of the burgeoning rebellion against the Empire and how people and planets became involved. In an era filled with danger, deception and intrigue, Cassian Andor embarks on the path that is destined to turn him into a rebel hero.\",\"poster_path\":\"/59SVNwLfoMnZPPB6ukW6dlPxAdI.jpg\",\"media_type\":\"tv\",\"genre_ids\":[10765,10759,10768],\"popularity\":678.791,\"first_air_date\":\"2022-09-21\",\"vote_average\":7.995,\"vote_count\":193,\"origin_country\":[\"US\"]},{\"adult\":false,\"backdrop_path\":\"/odJ4hx6g6vBt4lBWKFD1tI8WS4x.jpg\",\"id\":361743,\"title\":\"Top Gun: Maverick\",\"original_language\":\"en\",\"original_title\":\"Top Gun: Maverick\",\"overview\":\"After more than thirty years of service as one of the Navy’s top aviators, and dodging the advancement in rank that would ground him, Pete “Maverick” Mitchell finds himself training a detachment of TOP GUN graduates for a specialized mission the likes of which no living pilot has ever seen.\",\"poster_path\":\"/62HCnUTziyWcpDaBO2i1DX17ljH.jpg\",\"media_type\":\"movie\",\"genre_ids\":[28,18],\"popularity\":927.695,\"release_date\":\"2022-05-24\",\"video\":false,\"vote_average\":8.349,\"vote_count\":4482},{\"adult\":false,\"backdrop_path\":\"/qtfMr08KQsWXnCHY0a96N8NpQ2l.jpg\",\"id\":30984,\"name\":\"Bleach\",\"original_language\":\"ja\",\"original_name\":\"ブリーチ\",\"overview\":\"For as long as he can remember, Ichigo Kurosaki has been able to see ghosts. But when he meets Rukia, a Soul Reaper who battles evil spirits known as Hollows, he finds his life is changed forever. Now, with a newfound wealth of spiritual energy, Ichigo discovers his true calling: to protect the living and the dead from evil.\",\"poster_path\":\"/2EewmxXe72ogD0EaWM8gqa0ccIw.jpg\",\"media_type\":\"tv\",\"genre_ids\":[10759,16,10765],\"popularity\":271.634,\"first_air_date\":\"2004-10-05\",\"vote_average\":8.363,\"vote_count\":1309,\"origin_country\":[\"JP\"]},{\"adult\":false,\"backdrop_path\":\"/oxUG1YVKDXz8GqC57LuhZHLVscf.jpg\",\"id\":949423,\"title\":\"Pearl\",\"original_language\":\"en\",\"original_title\":\"Pearl\",\"overview\":\"Trapped on her family’s isolated farm, Pearl must tend to her ailing father under the bitter and overbearing watch of her devout mother. Lusting for a glamorous life like she’s seen in the movies, Pearl’s ambitions, temptations and repressions collide.\",\"poster_path\":\"/ulBLIBqvdnf4H6JBt0OpMCU1ECn.jpg\",\"media_type\":\"movie\",\"genre_ids\":[27],\"popularity\":191.009,\"release_date\":\"2022-09-16\",\"video\":false,\"vote_average\":6.983,\"vote_count\":119},{\"adult\":false,\"backdrop_path\":\"/9GvhICFMiRQA82vS6ydkXxeEkrd.jpg\",\"id\":92783,\"name\":\"She-Hulk: Attorney at Law\",\"original_language\":\"en\",\"original_name\":\"She-Hulk: Attorney at Law\",\"overview\":\"Jennifer Walters navigates the complicated life of a single, 30-something attorney who also happens to be a green 6-foot-7-inch superpowered hulk.\",\"poster_path\":\"/hJfI6AGrmr4uSHRccfJuSsapvOb.jpg\",\"media_type\":\"tv\",\"genre_ids\":[35,10765],\"popularity\":1165.889,\"first_air_date\":\"2022-08-18\",\"vote_average\":6.754,\"vote_count\":1193,\"origin_country\":[\"US\"]},{\"adult\":false,\"backdrop_path\":\"/pfAZP7JvTTxqgq7n6A1OYgkAdEW.jpg\",\"id\":894205,\"title\":\"Werewolf by Night\",\"original_language\":\"en\",\"original_title\":\"Werewolf by Night\",\"overview\":\"On a dark and somber night, a secret cabal of monster hunters emerge from the shadows and gather at the foreboding Bloodstone Temple following the death of their leader. In a strange and macabre memorial to the leader’s life, the attendees are thrust into a mysterious and deadly competition for a powerful relic—a hunt that will ultimately bring them face to face with a dangerous monster.\",\"poster_path\":\"/jmv7EbqBuEk4V1U7OoSBaxkwawO.jpg\",\"media_type\":\"movie\",\"genre_ids\":[28,14,27,10770],\"popularity\":408.687,\"release_date\":\"2022-09-25\",\"video\":false,\"vote_average\":7.195,\"vote_count\":544}],\"total_pages\":1000,\"total_results\":20000}"